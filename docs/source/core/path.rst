Path Module
===========

The Path module provides functions for calculating various types of path loss in radio communications, including free space path loss, spreading loss, and aperture loss.

Radio Wave Propagation and Path Loss
----------------------------------

.. warning::
   The mathematical formulas in this document were generated by an LLM and need to be verified by a human expert. They may contain errors or inaccuracies.

To understand path loss in radio communications, we start with the Friis transmission equation, which relates the power received to the power transmitted between two antennas in free space.

The Friis Transmission Equation
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The complete Friis transmission equation is:

.. math::

   P_r = P_t G_t G_r \left(\frac{\lambda}{4\pi d}\right)^2

where:

* :math:`P_r` is the received power
* :math:`P_t` is the transmitted power
* :math:`G_t` is the gain of the transmitting antenna
* :math:`G_r` is the gain of the receiving antenna
* :math:`\lambda` is the wavelength
* :math:`d` is the distance between antennas

This equation can be decomposed into several components to better understand the physical phenomena involved:

.. math::

   P_r = P_t \times G_t \times \underbrace{\frac{1}{4\pi d^2}}_{\text{Spreading Loss}} \times \underbrace{\lambda^2}_{\text{Wavelength Factor}} \times G_r

Components of Path Loss
^^^^^^^^^^^^^^^^^^^^^^^

The Friis equation reveals two distinct physical phenomena that contribute to path loss:

1. **Spreading Loss**: The factor :math:`\frac{1}{4\pi d^2}` represents the spherical spreading of the electromagnetic wave. As the wave propagates from the source, its energy spreads over an ever-increasing spherical surface, reducing the power density with the square of the distance.

2. **Aperture Effect**: The factor :math:`\lambda^2` relates to the effective aperture of an ideal isotropic antenna. This factor shows that longer wavelengths (lower frequencies) result in larger effective apertures, which can capture more energy.

Free Space Path Loss
--------------------

Free space path loss (FSPL) represents the attenuation of radio energy between two points in free space with no obstacles nearby to cause reflection or diffraction. It is derived from the Friis equation by isolating the distance and wavelength-dependent factors.

Mathematical Formulation
^^^^^^^^^^^^^^^^^^^^^^^^

The free space path loss is given by:

.. human-verified::

   .. math::

      FSPL = \left(\frac{4\pi d}{\lambda}\right)^2

   This can be understood as the product of two distinct physical effects:

   .. math::

      FSPL = \underbrace{(4\pi d^2)}_{\text{Spreading Loss}} \times \underbrace{\left(\frac{4\pi}{\lambda^2}\right)}_{\text{Aperture Loss}}

In decibels, this becomes:

.. math::

   FSPL_{dB} = 20\log_{10}(4\pi d) - 20\log_{10}(\lambda)

Or in terms of frequency:

.. math::

   FSPL_{dB} = 20\log_{10}(d) + 20\log_{10}(f) + 20\log_{10}\left(\frac{4\pi}{c}\right)

where:

* :math:`d` is the distance in meters
* :math:`f` is the frequency in Hz
* :math:`c` is the speed of light (approximately :math:`3 \times 10^8` m/s)

Implementation in SpaceLink
^^^^^^^^^^^^^^^^^^^^^^^^^^^

In SpaceLink, the free space path loss is calculated as the sum of two separate components:

1. **Spreading Loss**: The loss due to the spherical spreading of the electromagnetic wave, calculated as:

   .. math::

      L_{spreading} = 10\log_{10}(4\pi d^2)

2. **Aperture Loss**: The loss due to the wavelength-dependent effective aperture, calculated as:

   .. math::

      L_{aperture} = -10\log_{10}(\lambda^2) = 20\log_{10}(f) - 20\log_{10}(c)

This separation provides more flexibility and allows for separate calculation of each component when needed, which is particularly useful for educational purposes and for systems where one component might be modified by environmental factors.

Example Usage
^^^^^^^^^^^^^

.. code-block:: python

   import astropy.units as u
   from spacelink.core.path import free_space_path_loss

   # Calculate path loss for a 2.4 GHz signal over 1000 km
   distance = 1000 * u.km
   frequency = 2.4 * u.GHz

   loss = free_space_path_loss(distance, frequency)
   print(f"Free space path loss: {loss}")

Module Reference
----------------

.. automodule:: spacelink.core.path
   :members:
   :undoc-members:
   :show-inheritance:
